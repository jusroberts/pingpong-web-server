game new player
%script{:src => "/javascript/webcam.js"}
#my_camera
%canvas#canvas{:height => "240", :width => "320"}
=form_tag room_game_player_attach_image_post_path(room_id: @id) do
  #results
  %input{:onclick => "take_snapshot()", :type => "button", :value => "Take Snapshot"}/
  =submit_tag "Okay!"


:javascript
  Webcam.set({
    width: 320,
    height: 240,
    image_format: 'jpeg',
    jpeg_quality: 90
  });
  Webcam.attach( '#my_camera' );
  function take_snapshot() {
    Webcam.snap( function(data_uri) {
      item_image = data_uri.replace(/^data:image\/(png|jpg|jpeg);base64,/, "");
      document.getElementById('results').innerHTML =
        '<img src="'+data_uri+'"/>' +
        "<input id=\"capture_image\" type=\"hidden\" value=\""+data_uri+"\" name=\"capture[image]\">";
      $('#my_camera').css("display", "none");
    } );
  }
